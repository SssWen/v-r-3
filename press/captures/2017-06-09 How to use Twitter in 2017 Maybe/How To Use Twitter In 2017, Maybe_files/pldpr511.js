/*
 Nielsen SDK package v5.1.0.32 
 (c) 2017 The Nielsen Company 
*/
/* PLDPR build v5.1.0.81.3*/
window.NOLCMB.registerLib("PLDPR",function(a){"use strict";function e(a,e,t){var r=[],n=a.split("&"),o,i,s={};for(o=0,i=n.length;o<i;o+=1)0!==n[o].indexOf(e)?r.push(n[o]):s[e]=n[o];return t?{url:r.join("&"),params:s}:r.join("&")}function t(a){return a<10?"0"+a:""+a}function r(a,e){var r=new Date(1e3*e),n=r.getUTCFullYear().toString(),o=t(r.getUTCMonth()+1),i=t(r.getUTCDate());M({data:a,param:"nol_dayId",val:ja[r.getUTCDay()]}),M({data:a,param:"nol_hourCode",val:t(r.getUTCHours())}),M({data:a,param:"nol_dataDate",val:n+o+i})}function n(a,e){var t=a.split("||"),r=t[0]||a;if(window)for(var n=0,o=t.length;n<o;n+=1)r=t[n],"undefined"!=typeof window["on"+r]&&(window.addEventListener?window.addEventListener(r,e,!1):window.attachEvent&&window.attachEvent("on"+r,e))}function o(a,e){var t;if("num"==e)t=parseInt(a,10),a=isNaN(t)?0:t;else if("bin"==e)a=isNaN(Number(a))?"0":Number(a).toString(2);else if("bool"==e)switch(a.toString().toLowerCase()){case"false":case"no":case"0":case"":a=!1;break;default:a=!0}else"b2n"==e&&(t=parseInt(a,2),a=isNaN(t)?0:t);return a}function i(a){var e,t=[];for(e=0;e<o(a,"num");e+=1)t.push({tsv:0,save:!1,updated:!1});return t}function s(a){return{tags:[],eventQueue:a&&a.eventQueue?a.eventQueue:[],tagSize:1,bReInit:!1,debug:wa,eventQueueIndex:0}}function d(a){var t;void 0!==a&&0!==a.length&&(t=window.document.createElement("script"),t.type="text/javascript",t.src=e(a,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),t.onerror=function(a){var e=a.target.src;window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target),_a<va&&(_a+=1,window.setTimeout(function(){d(e)},5e3))},t.onload=function(a){_a=0,window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target)},window.document.head?window.document.head.appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t))}function l(){var e=Array.prototype.slice.call(arguments);a._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function p(a){return encodeURIComponent(a).replace("'","%27")}function c(a){var e=0===ra.indexOf("https")?"https":"http",t,r,n,o=a.url,i=a.hasOwnProperty("maskRef")?a.maskRef:-1;if("__sendIt"!==o&&"https"===e&&o.indexOf("https")===-1&&(o=e+o.substr(o.indexOf("://"))),a.prod&&"ocr"===a.prod&&o.indexOf("&ty=js")!==-1)return void d(o);if(Ta||"__sendIt"===o)if(o&&Ta&&Pa)Sa.push(o);else if("__sendIt"!==o||Pa)o&&Ta&&!Pa&&ga.push(o);else{for(Pa=!0,t=0,r=ga.length;t<r;t+=1)xa.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:P(a.serverTimeOffset),url:ga.shift(),maskRefUrl:i});ga=ga.concat(Sa),Pa=!1,Sa=[]}else xa.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:P(a.serverTimeOffset),url:o,maskRefUrl:i})}function m(a,e){var t="",r,n,o,i;if(!a||!e)return a;for(i=e.length,n=0,o=a.length;n<o;n+=1)r=a.charCodeAt(n)^e.charCodeAt(n%i),t+=0===r?a.charAt(n):String.fromCharCode(r);return t}function u(e,t,r,n){var o,i;r.indexOf("[")===-1&&r.indexOf("]")===-1&&(!n.val||n.val.length<=0)?(f(e,{type:"100",msg:r+" missing -- "+M({data:e,param:"nol_comment"})}),n.state=!1,n.val=""):"{"===t||"}"===t?n.val=a.CryptoJS.MD5(n.val.toString()).toString():"<"===t||">"===t?(o=r.match(la["<"].end),o?(i=o[0].match(/[\d]+/g),n.val=String(n.val).substr(i[0],i[1])):n.val=m(String(n.val),M({data:e,param:"nol_xorSeed"}))):"("!==t&&")"!==t||(n.val=p(n.val))}function _(a,e){var t=e.match(/[\[\{<\(]/g),r,n,o,i,s,d,l,p,c,m,_,v,g=M({data:a,param:"nol_xorSeed"})||"",y,T;if(t=t?t.reverse():[],n=e.match(/[\}\]\>\)]/g)||[],i={start:t.length?e.lastIndexOf(String(t[0])):-1,end:n.length?e.indexOf(String(n[0])):e.length},n&&">"===n[0]&&(i.end=e.search(la["<"].end)||e.indexOf(">")),d=e.substring(i.start+1,i.end),c=d.split("||"),c.length>0)for(m=0,_=c.length;m<_&&(d=c[m],v=M({data:a,param:d}),!(v&&v.length>0));m+=1);else v=M({data:a,param:d});if(v&&v.length>0&&(T="string"==typeof d?d.split("_"):d,y=T[0]?T.splice(0,2).join("_"):T,s=Ca[y]?Ca[y].encoding:"",s&&(t=t.reverse().concat(s.match(/[\[\{<\(]/g)).reverse(),n=n.reverse().concat(s.match(/[\}\]>\)]/g)).reverse())),r={val:v,state:M({data:a,param:"nolPriv_sendData"})},l=t?t.length:0,p=n?n.length:0,o=Math.min(l,p),o>0)for(m=0,_=o;m<_;m+=1)u(a,t[0]||n[0],e,r,g),t.shift(),n.shift();else(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",f(a,{type:100,msg:d+" missing "+M({data:a,param:"nol_comment"})}));return{val:r.val,strManipulate:t,strManiEnd:n}}function v(a,e,t){var r,n,o={val:"",state:M({data:a,param:"nolPriv_sendData"})},i=M({data:a,param:"nol_md5Seed"}),s,d,l,p=[],c,m=[],v=[],f,g="",y,T,h,P,S,w,b=M({data:a,param:"nol_xorSeed"});if(e=e||M({data:a,param:"nol_url"})||"",n=e.match(pa.regex),null!==n)for(T=0,h=n.length;T<h;T+=1){if(r=n[T],s=r.substr(pa.length,r.length-2*pa.length),d=s.split("+"),p=[],g="",l=0,d&&d.length>1){for(P=0,S=d.length;P<S;P+=1)if(g=d[P],c=_(a,g),c.strManipulate.length>0&&(l=p.length,m=[].concat(c.strManipulate,m)),p[l]=p[l]?p[l]+c.val:c.val,c.strManiEnd.length>0&&c.strManiEnd.length!==m.length){for(v=[].concat(v,c.strManiEnd),o={val:p[l],state:M({data:a,param:"nolPriv_sendData"})},f=0,w=c.strManiEnd.length;f<w;f+=1)u(a,m[0],g,o,b),m.shift(),v.shift();p[l]=o.val}for(o.val=p.join(""),y=m.length>=v.length?m:v,f=0,w=y.length;f<w;f+=1)u(a,y[0],g,o,b),m.shift(),v.shift()}else c=_(a,s),o={val:c.val,state:M({data:a,param:"nolPriv_sendData"})};e=e.replace(r,o.val)}return e}function f(e,t,r,n){var o,i,s=M({data:e,param:"nolPriv_errorSent"});return n!==!0&&M({data:e,param:"nolPriv_sendData",val:!1}),!(!r&&(!t||s.indexOf(t.type.toString()))!==-1)&&(!!Fa.isInitialized(e)&&(o=t.type+","+p(t.msg),M({data:e,param:"nol_errorMessage",val:o}),a._listeners.fireEvent("error",{type:"error",msg:o}),i=v(e,M({data:e,param:"nol_errorURL"})),c({baseSvrTime:Da(e),serverTimeOffset:M({data:e,param:"nolPriv_serverTimeOffset"}),url:i,maskRef:M({data:e,param:"nol_rfrmsk"})}),s+=t.type.toString()+",",M({data:e,param:"nolPriv_errorSent",val:s}),!0))}function g(a){var e=!1;e&&l(a)}function y(a,e,t){t&&!t.serviceSending[e]&&(t.serviceSending[e]=!0,d(a))}function T(a,e){var t=a||6;return Math.ceil(e/t)*t||"0"}function h(a,e){var t=!1,r=0,n=!1,i=o(M({data:a,param:"nol_unQualSegmentValue"}),"num"),s=M({data:a,param:"nol_minutes"}),d=[],l=!!e&&e.save,p,c,m,u=o(M({data:a,param:"nol_segmentTimeSpent"}),"num"),_=o(M({data:a,param:"nol_sendQual"}),"num"),v=M({data:a,param:"nol_cadence"});for(p=0,c=s.length;p<c;p+=1)m=Math.floor(s[p].tsv/M({data:a,param:"nol_creditValue"})),m>=1?(s[p].save&&"daypart"!==M({data:a,param:"nol_cadence"})?d.push(0):(d.push(M({data:a,param:"nol_creditFlag"})),r+=1,t=!0),n=!0):(d.push(0),n=!1),l?s[p].save=n:(s[p].tsv=0,s[p].save=!1,s[p].updated=!1);return M({data:a,param:"nol_duration",val:d.join("")}),_&&(t=r>=_),o(M({data:a,param:"nol_minWonOverride"}),"bool")===!0&&(t=!0),t||"interval"!==v&&"streamduration"!==v||l||("S"===M({data:a,param:"nol_segmentPrefix"})&&i&&M({data:a,param:"nol_duration",val:T(i,u)}),t=u>1),t}function P(a){return"undefined"!=typeof a?(Da()/1e3>>0)+a:Da()/1e3>>0}function S(a){Number(a)===a&&a%1!==0&&window.console&&window.console.warn&&window.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function w(a,e){var t=M({data:a,param:"nol_url"})||"",r,n,s,d,p=0,m,u=M({data:a,param:"nol_playerId"}),_=o(M({data:a,param:"nol_maxPingCount"}),"num"),f=o(M({data:a,param:"nol_pingCount"}),"num"),y=!!e&&e.returnLength,T=M({data:a,param:"nol_cadence"}),P=M({data:a,param:"nol_eventFilter"}),w=o(M({data:a,param:"nol_maxLength"}),"num");if(M({data:a,param:"nol_pingCreationTime",val:Da(a)/1e3>>0}),n=M({data:a,param:"nol_timeSpentViewing"}).content,s=M({data:a,param:"nol_timeSpentViewing"}).ad,d=M({data:a,param:"nol_timeSpentViewing"}).static,S(M({data:a,param:"nol_segmentTimeSpent"})),("dcrvideo"!==M({data:a,param:"nol_product"})||"1"===M({data:a,param:"nol_forceFireOnClose_content"})||!("dcrvideo"===M({data:a,param:"nol_product"})&&0===n.nol_segmentTimeSpent||"dcrstatic"===M({data:a,param:"nol_product"})&&0===d.nol_segmentTimeSpent)||"interval"!==T&&"streamduration"!==T||0!==s.nol_count||0!==s.nol_segmentTimeSpent)&&"false"===M({data:a,param:"nol_disabled"})&&(0===_||_>f)){if(Va.setNextTick(a,null,"content"),r=h(a,e)||"stream"===T||"impression"===T||"id3"===M({data:a,param:"nol_product"}),t=v(a,t),p=t.length,M({data:a,param:"nolPriv_sendData"})&&r&&!y||w>0&&w<p){if(M({data:a,param:"nol_id3Data"})&&M({data:a,param:"nol_id3Data",val:!1}),l(M({data:a,param:"nol_comment"})," -queued @"+Math.floor(Da(a)/1e3)+", timeOffset == "+M({data:a,param:"nolPriv_serverTimeOffset"})+", DU == "+M({data:a,param:"nol_segmentTimeSpent"})+" -- ",t),P.onSendPing&&(x(a,P.onSendPing),"true"===M({data:a,param:"nol_disabled"})))return;c({baseSvrTime:Da(a),serverTimeOffset:M({data:a,param:"nolPriv_serverTimeOffset"}),url:t,prod:M({data:a,param:"nol_product"}),maskRef:M({data:a,param:"nol_rfrmsk"})}),M({data:a,param:"nol_viewCount_"+a._currVidType.toLowerCase(),val:"0"}),Va.clear(a),ma&&ma.hasOwnProperty(u)&&ma[u].hasOwnProperty("debug")&&"logging"===ma[u].debug&&(m=M({data:a,param:"nol_debugUrl"}),m||(m=M({data:a,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),m+="pli="+u+"&sendPing="+M({data:a,param:"nol_product"})+"&"+t.substring(t.indexOf("?")+1),g(m)),f+=1,n.nol_segmentTimeSpent=0,n.nol_count=0,s.nol_segmentTimeSpent=0,s.nol_count=0,d.nol_segmentTimeSpent=0,d.nol_count=0,M({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Da(a)/1e3)}),M({data:a,param:"nolPriv_priority",val:0}),M({data:a,param:"nol_pingCount",val:f.toString()}),M({data:a,param:"nol_forceFireOnClose_content",val:"0"});var b=i(M({data:a,param:"nol_segmentLength"}));M({data:a,param:"nol_duration",val:new Array(b.length+1).join("0")})}else if(y)return{len:p,fData:t};return null}}function b(e){try{if("undefined"==typeof e)return;var t=i(M({data:e,param:"nol_segmentLength"}));M({data:e,param:"nol_minutes",val:t}),M({data:e,param:"nol_duration",val:new Array(t.length+1).join("0")})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function O(a,e){var t=o(M({data:a,param:"nol_segmentLength"}),"num")*o(M({data:a,param:"nol_segmentValue"}),"num"),r={segment:Math.floor(e/t+1),minute:Math.floor(e%t/M({data:a,param:"nol_segmentValue"})),seconds:e%M({data:a,param:"nol_segmentValue"})};return r}function C(e,t){var n,s=M({data:t,param:"nol_tagSrc"}),e=""!==e?e:"id3"===s&&M({data:t,param:"nol_fdcid"})!==M({data:t,param:"nol_cidNull"})?M({data:t,param:"nol_fdoffset"}):"id3"===s&&M({data:t,param:"nol_pccid"})!==M({data:t,param:"nol_cidNull"})?M({data:t,param:"nol_pcoffset"}):e,d=M({data:t,param:"nol_eventFilter"}),l=M({data:t,param:"nol_minutes"}),p=o(M({data:t,param:"nol_pingCount"}),"num"),c,m,u,_,v,f,g,y,T=M({data:t,param:"nol_playerId"}),h=a._players&&a._players.hasOwnProperty(T)?a._players[T]:-1,P=M({data:t,param:"nol_localDay"}),S=M({data:t,param:"nol_dayQhr"}),b=M({data:t,param:"nol_weekQhr"}),C,L,k,E=M({data:t,param:"nol_wmDay"}),A=M({data:t,param:"nol_wmDayQhr"}),I,D,V=o(M({data:t,param:"nol_weekEndUTC"}),"num"),F=o(M({data:t,param:"nol_weekStartUTC"}),"num"),R=V-F,N,j=o(M({data:t,param:"nolPriv_serverTimeOffset"}),"num"),B,U=M({data:t,param:"nol_timer"})||"nol_fdoffset",Q=o(M({data:t,param:"nolPriv_currMin"}),"num"),G=o(M({data:t,param:"nol_maxPingCount"}),"num"),W=o(M({data:t,param:"nol_creditValue"}),"num"),q=o(e,"num"),z=o(M({data:t,param:"nol_intrvlThrshld"}),"num")||86400,H="nol_cmsoffset"===U||"nol_pageoffset"===U?o(M({data:t,param:"nol_cmsIntrvlGp"}),"num")||2:o(M({data:t,param:"nol_id3IntrvlGp"}),"num"),Y=o(M({data:t,param:"nol_segmentLength"}),"num")*o(M({data:t,param:"nol_segmentValue"}),"num"),K=o(M({data:t,param:"nol_currSeg"}),"num"),X=o(M({data:t,param:"nolPriv_now"}),"num"),Z,$=M({data:t,param:"nol_timeSpentViewing"})[t._currVidType],aa=o(M({data:t,param:"nolPriv_currPos"}),"num");if(I=Math.floor(q/86400)+1,E||M({data:t,param:"nol_wmDay",val:I}),D=Math.floor(q%86400/900)+1,A||M({data:t,param:"nol_wmDayQhr",val:D}),q>86400&&"nol_cmsoffset"===U?(q+=j,y=q+o(M({data:t,param:"nol_startDayTimeOffset"}),"num"),f=y+o(M({data:t,param:"nol_GMTOffset"}),"num")):y=f=q,C=Math.floor(f/86400)+1,P&&P!=C&&w(t),P||M({data:t,param:"nol_localDay",val:C}),q>V&&(d.onWeekEndUTC?x(t,d.onWeekEndUTC):(M({data:t,param:"nol_week",val:M({data:t,param:"nol_nextWeek"})}),M({data:t,param:"nol_period",val:M({data:t,param:"nol_nextPeriod"})}),M({data:t,param:"nol_weekStartUTC",val:V+1}),M({data:t,param:"nol_weekEndUTC",val:V+1+R}))),L=Math.floor((q-o(M({data:t,param:"nol_weekStartUTC"}),"num"))/900)+1,b&&L===b||M({data:t,param:"nol_weekQhr",val:L}),"nol_cmsoffset"===U&&(q=f%86400),k=Math.floor(q/900)+1,S||M({data:t,param:"nol_dayQhr",val:k}),q=Math.floor(q),"1"===M({data:t,param:"nol_applyViewInc"})&&(J(t),M({data:t,param:"nol_applyViewInc",val:"0"})),!("true"===M({data:t,param:"nol_disabled"})||void 0===q||G>0&&G<=p&&"daypart"!==M({data:t,param:"nol_cadence"}))){var ea=M({data:t,param:"nol_devTimeZone"}),ta=/^GMT([-+]?)([0-9]+):([0-9]+)$/.exec(ea);if(ta){var ra="-"==ta[1]?-60:60;r(t,Da(t)/1e3+ra*(60*Number(ta[2])+Number(ta[3])))}if("stream"!==M({data:t,param:"nol_cadence"})&&"impression"!==M({data:t,param:"nol_cadence"})){if(aa=""===aa?q:o(aa,"num"),X||(X=Da(t)),B=Math.ceil((Da(t)-X)/1e3)||1,Z=O(t,aa),n=Z.segment,N=Z.minute,c=Z.seconds,v=q-aa,M({data:t,param:"nolPriv_currPos",val:q}),K&&void 0!==n&&K!==n&&(("dcrvideo"!==M({data:t,param:"nol_product"})||"dcrvideo"===M({data:t,param:"nol_product"})&&M({data:t,param:"nol_segmentTimeSpent"})>0)&&w(t,{save:!0}),"episode"!==M({data:t,param:"nol_cadence"})&&M({data:t,param:"nol_pingCount",val:0}),l=i(M({data:t,param:"nol_segmentLength"})),M({data:t,param:"nol_minutes",val:l}),S&&S!==k&&(M({data:t,param:"nol_dayQhr",val:k}),M({data:t,param:"nol_weekQhr",val:L}),P&&P!==C&&M({data:t,param:"nol_localDay",val:C})),A&&A!==D&&M({data:t,param:"nol_wmDayQhr",val:D}),E&&E!==I&&M({data:t,param:"nol_wmDay",val:I})),K=n,void 0!==N&&v>0){if(Q!==N&&(l[N].save||"daypart"===M({data:t,param:"nol_cadence"})||(l[N].tsv>=W?w(t):(l[N].tsv=0,l[N].updated=!1))),v<H||v<=Math.ceil(1.5*B)&&v<z)for(g=o(M({data:t,param:"nol_sendQual"}),"num"),m=0;m<v;m+=1){if((c+m)%M({data:t,param:"nol_segmentValue"})!==0){if("daypart"!==M({data:t,param:"nol_cadence"})&&l[N].tsv>=M({data:t,param:"nol_segmentValue"})&&(l[N].save?(l[N].tsv=0,l[N].save=!1,l[N].updated=!1):w(t)),l[N].tsv+=1,$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1,l[N].tsv>=W&&g){for(l[N].updated||(M({data:t,param:"nolPriv_priority",val:Da(t)}),l[N].updated=!0),u=0,_=0;u<l.length;u+=1)if(_+=l[u].tsv>=W?1:0,_>=g){g="send";break}"send"===g&&M({data:t,param:"nol_sendQual"})&&(d.onViewWon&&x(t,d.onViewWon),w(t,{save:!0}),g=0,"daypart"!==M({data:t,param:"nol_cadence"})&&M({data:t,param:"nol_sendQual",val:"0"}))}}else 0!==m&&(N+=1),l.length<=N?(w(t,{save:!0}),N=0,K+=1,M({data:t,param:"nol_currSeg",val:K}),M({data:t,param:"nol_pingCount",val:0}),l=i(M({data:t,param:"nol_segmentLength"})),M({data:t,param:"nol_minutes",val:l}),S&&S!==k&&(M({data:t,param:"nol_dayQhr",val:k}),M({data:t,param:"nol_weekQhr",val:L}),P&&P!==C&&M({data:t,param:"nol_localDay",val:C})),A&&A!==D&&M({data:t,param:"nol_wmDayQhr",val:D}),E&&E!==I&&M({data:t,param:"nol_wmDay",val:I})):"daypart"!==M({data:t,param:"nol_cadence"})&&!l[N].save&&l[N].tsv>=W?w(t):l[N].save||(l[N].tsv=1,l[N].updated=!1),$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1;M({data:t,param:"nolPriv_currMin",val:N})}M({data:t,param:"nolPriv_now",val:Da(t)}),h!==-1&&"dcrstatic"!==M({data:t,param:"nol_product"})&&(h.pauseObj.pauseTime=0)}}else n=Math.floor(q/Y+1),"content"===M({data:t,param:"nol_ac"})&&(K=n,M({data:t,param:"nol_currSeg",val:K})),w(t);M({data:t,param:"nol_currSeg",val:K})}}function L(a,e,t){var r=M({data:a,param:"iag_"+e});return void 0!==r&&""!==r?t="&pr=iag."+e+","+p(r):t&&t.length>0&&t.indexOf("&pr=iag")===-1?t="&pr=iag."+e+","+p(t):void 0!==t&&null!==t||(t=""),t}function k(a,e){var t,r,n,i,s,d,l,c,m,u,_,v,f,g,y,T,h=M({data:a,param:"nol_vidtype"});M({data:a,param:"nol_prod"}).indexOf("iag")>=0&&(t="",r=L(a,"sid",M({data:a,param:"nol_sid",vidType:"content"})),n=L(a,"tfid",M({data:a,param:"nol_tfid",vidType:"content"})),i=L(a,"bcr",M({data:a,param:"nol_clientid",vidType:"content"})),d=L(a,"epi",M({data:a,param:"nol_title"})||M({data:a,param:"nol_title",vidType:"content"})),s=L(a,"pgm",M({data:a,param:"nol_censuscategory"})||M({data:a,param:"nol_category"})||M({data:a,param:"nol_iagcategory"})),s||(s=L(a,"pgm",M({data:a,param:"nol_censuscategory",vidType:"content"})||M({data:a,param:"nol_category",vidType:"content"})||M({data:a,param:"nol_iagcategory",vidType:"content"})),s||(s="&pr=iag.pgm,general")),l="&pr=iag.seg,",l+=o(M({data:a,param:"nol_chapter",vidType:"content"}),"num")>1?M({data:a,param:"iag_seg"})||M({data:a,param:"nol_chapter",vidType:"content"}):"1",c=L(a,"pd",c),m=L(a,"oad",m),f=L(a,"fp",f),T=L(a,"cust1",T),"ad"===e?(u="&pr=iag.brn,"+M({data:a,param:"nol_clientid"}),_="&pr=iag.cte,"+p(M({data:a,param:"nol_adURL"})),v="midroll"===h?"&pr=iag.ap,mid":"postroll"===h?"&pr=iag.ap,post":"&pr=iag.ap,pre",r=L(a,"sid",r),n=L(a,"tfid",n),i=L(a,"bcr",i),u=L(a,"brn",u),_=L(a,"cte",_),s=L(a,"pgm",s),d=L(a,"epi",d),l=L(a,"seg",l),c=L(a,"pd",c),m=L(a,"oad",m),g=L(a,"pod",g),y=L(a,"apt",y),t=r+n+i+s+d+l+c+u+v+_+m+f+g+y+T):t=r+n+i+s+d+l+c+m+f+T,t+="&pr=iag.cp,soc",M({data:a,param:"nol_iagData",val:t}))}function E(e){var t;if(ma[e.id]&&ma[e.id].tags.length===ma[e.id].tagSize){if(a._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),ma[e.id].debug!==wa&&"logging"===ma[e.id].debug){if(t=ma[e.id].nol_debugUrl,t||(t=ma[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),ma[e.id].eventQueue.length>ma[e.id].eventQueueIndex+1)for(var r=ma[e.id].eventQueueIndex;r<ma[e.id].eventQueue.length;r++)g(t+"pli="+e.id+"&ggpm="+JSON.stringify(ma[e.id].eventQueue[r])),ma[e.id].eventQueueIndex=r;t+="pli="+e.id+"&ggpm="+JSON.stringify(e),g(t)}e.timeStamp=ma.hasOwnProperty(e.id)&&ma[e.id].nolPriv_baseSvrTime?Da({type:"override",baseSvrTime:ma[e.id].nolPriv_baseSvrTime}):Da();for(var r=0,n=ma[e.id].tags.length;r<n;r+=1)ma.hasOwnProperty(e.id)&&ma[e.id].tags[r].eventListener(e)}else ma[e.id]&&ma[e.id].eventQueue||(ma[e.id]=s(ma[e.id])),ma[e.id].eventQueue.push(e)}function A(a,e){var t,r;ma[e].bReInit||(ma[e].bReInit=!0,ma[e].eventQueue=[],a&&ma[e].eventQueue.push(a),d(Oa))}function I(a,e,t){var r=!1,n=t.toString().toLowerCase().indexOf(e.toString().toLowerCase());return"-"===a&&n===-1?r=!0:"+"===a&&(t===e||n!==-1&&t&&e)?r=!0:"--"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())===-1?r=!0:"++"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())!==-1&&(r=!0),r}function x(a,e,t){var r=e||M({data:a,param:"nol_finalFilter"}),n,o,i,s,d,l,p,c,m,u,_,v=t||{};if(r&&void 0!==r)for(n=0,o=r.length;n<o;n+=1){if(c=r[n],c.tagVar.length)for(var i=0,s=c.tagVar.length;i<s&&(u=M({data:a,param:c.tagVar[i].name}),u);i++);else u=M({data:a,param:c.tagVar.name});if(u&&c.tagVar.value===u){for(i=0,s=c.cond.length;i<s;i+=1){if(p=v[c.cond[i]]||M({data:a,param:c.cond[i]}),l=0===c.is.value.indexOf("nol_")&&M({data:a,param:c.is.value})?M({data:a,param:c.is.value}):c.is.value,void 0===p||void 0===l||!I(c.is.type,p,l)){m=!1;break}m=!0}if(void 0!==m&&(_=m?c.then:c.else,void 0!==_))for(d in _)_.hasOwnProperty(d)&&(void 0!==v.nol_vidtype?v[d]=_[d]:M({data:a,param:d,val:_[d]}))}}}function D(a,e){var t,r=a.data._settings,n=a.param;return void 0===e||null===e?(t=r.hasOwnProperty(n)&&ma[r.nol_playerId].nol_tagMap.hasOwnProperty(n)&&("object"==typeof ma[r.nol_playerId].nol_tagMap[n]||"array"==typeof ma[r.nol_playerId].nol_tagMap[n])?ma[r.nol_playerId].nol_tagMap[n][r[n]]:r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]:ma[r.nol_playerId].nol_tagMap.nol_defaults[n]||ma[r.nol_playerId][n],void 0===t&&(t=r.hasOwnProperty(n)?r[n]:ma[r.nol_playerId].nol_tagMap[n])):r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]=e:r[n]=e,t}function M(e){try{if(e){if("string"==typeof e.param&&e.param.indexOf("nol_")===-1&&e.param.indexOf("nolPriv_")===-1&&e.param.split("_").length-1>1)return;var t="string"==typeof e.param?e.param.split("_"):e.param,r,n=t[0]?t.splice(0,2).join("_"):t,o=e.vidType||t[0]||e.data._currVidType,i=e.data._currAssetid||"0",s="undefined"!=typeof e.data._dataArrObj[o][i]?e.data._dataArrObj[o][i]:e.data._dataArrObj[o][Object.keys(e.data._dataArrObj[o]).splice(-1,1)],d=Ca[n]?Ca[n].clientField:n;if("object"==typeof d)r=s;else if("nol_segmentTimeSpent"===d||"nol_cumeTimeSpent"===d||"nol_count"===d){var l=M({data:e.data,param:"nol_timeSpentViewing"});r=l[o][d]}else void 0===e.val||null===e.val?(r=s&&s.hasOwnProperty(d)?s[d]:ma[e.data._settings.nol_playerId][d],void 0!==r&&""!==r||(r=D(e)||"",void 0!==r&&""!==r||(0===d.indexOf("nol_")?e.param=d:e.param=n,r=D(e)||""))):s&&(s[d]=e.val);return r}return null}catch(e){window.console&&window.console.error&&window.console.error("Error in Data(): "+e.message+" __param: "+t),a._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+e.message})}}function V(e,t){var r=Fa.findPlayer(e),n=r.oServiceCall[t.service],o=t.url,i=t.key,s;if(t.evntCB=M({data:e,param:e.serviceFlag[t.service].callback}),t.callBack=function(a){F(e,a,t)},!n&&i&&o&&o.length>0)"stnupdate"===t.evntCB&&("undefined"==typeof r.oServiceCall[t.service]||"undefined"==typeof r.oServiceCall[t.service].status||"init"!==r.oServiceCall[t.service].status&&"complete"!==r.oServiceCall[t.service].status)&&(r.oServiceCall[t.service]={status:"init",station:null,data:null}),a._listeners.addListener(t.evntCB,t.callBack,!0),y(v(e,o),t.service,r);else if(n&&"init"===n.status);else if(n&&"complete"===n.status&&i!==n.station)a._listeners.addListener(t.evntCB,t.callBack,!0),y(v(e,o),t.service,r);else if(n&&"complete"===n.status&&i===n.station){for(s in n.data)n.data.hasOwnProperty(s)&&M({data:e,param:s,val:n.data[s]});if(ka?x(e,ka[t.service]):x(e,La),"true"===M({data:e,param:"nol_disabled"}))return;e.serviceFlag[t.service].need&&(M({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[t.service].need=!1,C(M({data:e,param:"nol_queueTime"}),e))}else a._listeners.fireEvent(t.evntCB,t),window.setTimeout(function(){V(e,t)},1e3)}function F(a,e,t){var r={},n,i=0,s;if(M({data:a,param:"nol_playerId"})===e.target.nol_playerId){for(s in e.target)e.target.hasOwnProperty(s)&&(M({data:a,param:s,val:e.target[s]}),r[s]=e.target[s]);var d=Fa.findPlayer(a);if(d){var l="undefined"!=typeof d.oServiceCall[t.service]&&d.oServiceCall[t.service].hasOwnProperty("status")?d.oServiceCall[t.service].status:"undefined";d.oServiceCall[t.service]={status:"complete",prevStatus:l,station:t.key,data:r},d.serviceSending[t.service]=!1}if(ka?x(a,ka[t.service]):x(a,La),"true"===M({data:a,param:"nol_disabled"}))return;a.serviceFlag[t.service].need&&(M({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[t.service].need=!1,e.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===M({data:a,param:"nol_cadence"})&&(i=o(e.target.nol_fdTimeCode,"num"),n=o(M({data:a,param:"nol_queueTime"}),"num"),M({data:a,param:"nol_queueTime",val:n+i})),C(M({data:a,param:"nol_queueTime"}),a))}}function R(a){return"id3"===M({data:a,param:"nol_product"})&&M({data:a,param:"nol_id3Data"})?void w(a):void("true"!==M({data:a,param:"nol_disabled"})&&"1"===M({data:a,param:"nol_davState"})&&(M({data:a,param:"nol_davState",val:"2"}),"daypart"===M({data:a,param:"nol_cadence"})?w(a,{save:!0}):w(a),b(a),M({data:a,param:"nol_disabled",val:"true"})))}function N(a){"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"!==M({data:a,param:"nol_cadence"})||("content"===M({data:a,param:"nol_ac"})&&M({data:a,param:"nol_segmentTimeSpent"})>0||"streamduration"===M({data:a,param:"nol_cadence"})&&M({data:a,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"===M({data:a,param:"nol_cadence"})||"postroll"===M({data:a,param:"nol_vidtype"})&&"interval"===M({data:a,param:"nol_cadence"}))&&("content"===M({data:a,param:"nol_ac"})?w(a,{save:!0}):w(a),M({data:a,param:"nolPriv_now",val:0}))}function j(e,t){var r=null,n=Da(e);try{e&&Va.isEnabled(e)&&(r=Ra.inferEvent(t.currEvtType,e,t._param1,n,t._param3),r&&(r.event!==Ra.events.play&&Fa.state.set(e,r),Va.preProcess(e,r)))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:r,timestamp:n}}function B(e,t){try{e&&t.inferredEvent&&(t.inferredEvent.event===Ra.events.play&&Fa.state.set(e,t.inferredEvent),Va.postProcess(e,t.inferredEvent))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function U(e){try{var t=M({data:e,param:"nol_playerId"});ma&&ma.hasOwnProperty(t)&&(!ma[t].hasOwnProperty("nol_sessionId")||ma[t].hasOwnProperty("forceStreamRegen")&&ma[t].forceStreamRegen===!0)&&(ma[t].nol_sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var e=16*Math.random()|0,t="x"==a?e:3&e|8;return t.toString(16)}),ma[t].forceStreamRegen=!1)}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function Q(e,t){var r=M({data:e,param:"nol_playerId"});if(r===t.id){if(!t.evtInfo||t.evtInfo.hasOwnProperty("param1")&&(null===t.evtInfo.param1||"undefined"==typeof t.evtInfo.param1))return void a._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"});var n=t.evtInfo,s=n.param1,d=n.param3?n.param3:s.hasOwnProperty("param3")?s.param3:s,l,p,c,m,u=o(M({data:e,param:"nolPriv_id3Count"}),"num"),_,v,g,y=M({data:e,param:"nol_segmentSpentViewing"}),T=M({data:e,param:"nol_enableFilterMap"}),h="|mtvr|,|dprid3|,|id3|",P,S,b={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},O,L,E,I=M({data:e,param:"nol_prod"}),D,F={},Q=n.eventType.toString(),G,q="content",H,Y,K,X=M({data:e,param:"nolPriv_serverTimeOffset"}),Z=Ca.nol_vidtype?Ca.nol_vidtype.clientField:"nol_vidtype",$=Ca.nol_tagSrc?Ca.nol_tagSrc.clientField:"nol_tagSrc",aa=Ca.nol_assetid?Ca.nol_assetid.clientField:"nol_assetid",ea=Ca.nol_ac?Ca.nol_ac.clientField:"nol_ac",ta=Ca.nol_linearAdLoadFlag?Ca.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",ra=d[Z]?d[Z].toString().toLowerCase():"",na=Math.round(Da(e)/1e3),oa="nol_assetid",ia=Fa.findPlayer(e),sa=j(e,{currEvtType:Q,_param1:s,_param3:d});switch(Q=Q.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===Q||"staticstart"===Q)&&"dcrstatic"!==M({data:e,param:"nol_product"}))return;if("14"!==Q&&"staticstart"!==Q&&"dcrstatic"===M({data:e,param:"nol_product"}))return;var da=","+M({data:e,param:"nol_contentType"});e._currVidType=ra&&da.indexOf(","+ra)!==-1?"content":"dcrstatic"===M({data:e,param:"nol_product"})?"static":"ad";var la=null,pa=null;if(("ad"===M({data:e,param:"nol_ac"})&&M({data:e,param:"nol_segmentTimeSpent"})>0&&"streamduration"===M({data:e,param:"nol_cadence"})||"stream"===M({data:e,param:"nol_cadence"})&&"dcrstatic"===M({data:e,param:"nol_product"})||"dcrstatic"===M({data:e,param:"nol_product"})&&String(e._currAssetid)!==String(d[aa]))&&R(e),M({data:e,param:"nol_onCompleteFired"})===!0?("content"!==e._currVidType&&"static"!==e._currVidType||("content"===e._currVidType.toLowerCase()&&ma[r].hasOwnProperty("forceStreamRegen")&&ma[r].forceStreamRegen===!0&&U(e),M({data:e,param:oa,val:-1}),"content"===e._currVidType?(la=Fa.state.clone(e),pa=Va.clone(e),W(e)):W(e,!0)),M({data:e,param:"nol_onCompleteFired",val:!1})):"14"!==Q&&"staticstart"!==Q||"stream"!==M({data:e,param:"nol_cadence"})||(M({data:e,param:oa,val:-1}),W(e)),"ad"===e._currVidType&&e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){var ca=i(M({data:e,param:"nol_segmentLength"}));M({data:e,param:"nol_minutes",val:ca}),M({data:e,param:oa,val:-1}),M({data:e,param:Z,val:ra})}if(e._currAssetid=d&&d.hasOwnProperty(aa)&&"daypart"===M({data:e,param:"nol_cadence"})||"stream"!==M({data:e,param:"nol_cadence"})&&"dcrstatic"===M({data:e,param:"nol_product"})?d[aa]:e._currAssetid,d.nol_ac=e._currVidType,o(M({data:e,param:"nol_serverTime"}),"num")+86400<Math.round(Da(e)/1e3)+X)return R(e),void A(t,M({data:e,param:"nol_playerId"}));for(G=0,H=T.length;G<H;G+=1)l=Ca[T[G]]?Ca[T[G]].clientField:T[G],F[T[G]]=String(d[l]||"");if(_=d.hasOwnProperty(aa)?String(d[aa]):M({data:e,param:"nolPriv_assetid"}),x(e,La.onCmsDetected,F),"false"!==F.nol_disabled||!d)return void("cms"!==e._currTagSrc&&(z(e,"loadMetadata",d),M({data:e,param:"nol_disabled",val:"true"})));if("static"===e._currVidType&&"dcrstatic"===M({data:e,param:"nol_product"})?(a._listeners.fireEvent("updateCmbStaticPage",{evtInfo:n,plid:r}),q="static"):q="content",_!==M({data:e,param:oa})){if("ad"!==M({data:e,param:"nol_ac"})&&R(e),z(e,"loadMetadata",d),M({data:e,param:"nolPriv_assetid",val:M({data:e,param:oa})}),"15"!==Q&&"loadmetadata"!==Q||"id3"!==M({data:e,param:$,vidType:"content"})||M({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})!==!1||M({data:e,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),x(e,La.onAssetIdChanged),"true"===M({data:e,param:"nol_disabled"}))return;if("drm"===M({data:e,param:"nol_product"}))e.serviceFlag.stn.need=!0;else if(e.serviceFlag.stn.need=!1,"true"===M({data:e,param:"nol_disabled"}))return;if(x(e,La.onComplete),la&&Fa.state.bind(e,la),pa&&Va.bind(e,pa),"true"===M({data:e,param:"nol_disabled"}))return}if("ad"===e._currVidType&&"dcrvideo"===M({data:e,param:"nol_product"})&&"impression"!==M({data:e,param:"nol_cadence"})){var ua=M({data:e,param:"nol_timeSpentViewing"});ua[e._currVidType].nol_count++}M({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Da(e)/1e3)}),I.indexOf("iag")!==-1&&k(e,e._currVidType,Ca),("ad"===e._currVidType&&"dcrvideo"!==M({data:e,param:"nol_product"})||"stream"===M({data:e,param:"nol_cadence"}))&&(M({data:e,param:"nol_pingCount",val:0}),M({data:e,param:"nolPriv_sendData",val:!0}),M({data:e,param:"nol_davState",val:"0"}),e.serviceFlag.stn.need||"content"===e._currVidType||"nol_cmsoffset"!==M({data:e,param:"nol_timer"})&&"nol_pageoffset"!==M({data:e,param:"nol_timer"})||C(0,e)),"14"!==Q&&"staticstart"!==Q||"dcrstatic"!==M({data:e,param:"nol_product"})||ia.static.started===!0||(a.PLDCR.start(!0),ia.static.started=!0);break;case"5":case"play":if("mtvr"===M({data:e,param:"nol_product"})){if(E=Ca.nol_channelName?Ca.nol_channelName.clientField:"nol_channelName",d[E]&&d[E].length>0)for(Y in d)d.hasOwnProperty(Y)&&M({data:e,param:Y,val:d[Y]})}else"dcrvideo"===M({data:e,param:"nol_product"})&&(e._currVidType="content",F={nol_vidtype:M({data:e,param:Z,vidType:e._currVidType}),nol_tagSrc:M({data:e,param:$,vidType:e._currVidType}),nol_linearAdLoadFlag:M({data:e,param:ta,vidType:e._currVidType}),nol_ac:M({data:e,param:ea,vidType:e._currVidType})},x(e,La.onCmsDetected,F));break;case"6":case"pause":N(e);break;case"7":case"stop":N(e);break;case"updateott":if(N(e),s&&s.hasOwnProperty("ottStatus")&&s.ottStatus.length>0){for(var oa in s)s.hasOwnProperty(oa)&&(M({data:e,param:oa,val:s[oa],vidType:"content"}),ia.ottStatusObj[oa]=s[oa]);La.onOTTDetected&&x(e,La.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===Q||"staticend"===Q)&&"dcrstatic"!==M({data:e,param:"nol_product"}))return;if("56"!==Q&&"staticend"!==Q&&"dcrstatic"===M({data:e,param:"nol_product"}))return;if(!("57"!==Q&&"oncomplete"!==Q||"mtvr"!==M({data:e,param:"nol_product"})&&"id3"!==M({data:e,param:$,vidType:"content"})||M({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})===!0))return;"ad"===e._currVidType&&("streamduration"===M({data:e,param:"nol_cadence"})?w(e):"dcrvideo"===M({data:e,param:"nol_product"})&&"interval"===M({data:e,param:"nol_cadence"})&&(""===M({data:e,param:"nol_dataDate",vidType:"content"})&&""!==M({data:e,param:"nol_dataDate"})&&(M({data:e,param:"nol_dataDate",val:M({data:e,param:"nol_dataDate"}),vidType:"content"
}),M({data:e,param:"nol_hourCode",val:M({data:e,param:"nol_hourCode"}),vidType:"content"}),M({data:e,param:"nol_dayId",val:M({data:e,param:"nol_dayId"}),vidType:"content"})),e._currVidType="content",La.onEndDetected&&x(e,La.onEndDetected),w(e))),"static"!==M({data:e,param:"nol_ac"})&&(e._currVidType="content"),La.onEndDetected&&x(e,La.onEndDetected),M({data:e,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==M({data:e,param:"nol_disabled"})&&"id3"!==M({data:e,param:"nol_product"})||("static"===M({data:e,param:"nol_ac"})&&a._listeners.fireEvent("removeCmbAssetId",n),R(e)),M({data:e,param:"nol_onCompleteFired",val:!0}),ma[r].forceStreamRegen=!0,"56"!=Q&&"staticend"!=Q||"dcrstatic"!==M({data:e,param:"nol_product"})||(a.PLDCR.stop(),ia.static.started=!1),"57"!==Q&&"oncomplete"!==Q||M({data:e,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"});break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===M({data:e,param:"nol_disabled"})||!s||"nol_pageoffset"!==M({data:e,param:"nol_timer"}))return;"1"===M({data:e,param:"nol_onPaginateFired_static"})&&(M({data:e,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==M({data:e,param:"nol_cadence"})&&J(e,{vidType:"static"})),K=o(M({data:e,param:"nol_highWM"}),"num"),K<o(s,"num")&&M({data:e,param:"nol_highWM",val:s}),C(s,e),M({data:e,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){if(M({data:e,param:"nol_onCompleteFired"})===!0&&a._listeners.fireEvent("flushPauseEventQueue"),"true"===M({data:e,param:"nol_disabled"})||!s||"nol_cmsoffset"!==M({data:e,param:"nol_timer"})||"ad"===e._currVidType&&"dcrvideo"===M({data:e,param:"nol_product"})&&"impression"===M({data:e,param:"nol_cadence"}))return;if("number"!=typeof s){if("string"!=typeof s)return;s=o(s,"num")}M({data:e,param:"nol_isLive",val:(s>86400).toString()}),K=o(M({data:e,param:"nol_highWM"}),"num"),K<s&&M({data:e,param:"nol_highWM",val:s}),e.serviceFlag.stn.need?(M({data:e,param:"nol_queueTime",val:s}),V(e,{service:"stn",key:M({data:e,param:"nol_assetid"}),url:M({data:e,param:"nol_stationURL"}),nol_playerId:M({data:e,param:"nol_playerId"})})):C(s,e),M({data:e,param:"nol_davState",val:"1"})}else t.timeStamp&&!Ma[t.timeStamp]&&(Ma[t.timeStamp]=f(e,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Ma[t.timeStamp]&&a._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if(("object"==typeof s&&Object.keys(s).length>0||"string"==typeof s&&s.length>0)&&(M({data:e,param:"nol_onCompleteFired"})===!0&&ia&&ia.getPauseQueueCount&&ia.getPauseQueueCount()>0?a._listeners.fireEvent("flushPauseEventQueue"):M({data:e,param:"nol_onCompleteFired"})===!0&&ia&&!ia.getPauseQueueCount&&a._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof s))for(H=0;H<s.length;H+=1)if(s[H].key&&"PRIV"===s[H].key){s=s[H].info;break}if(S=s.toString(),249!==S.length&&t.timeStamp&&!Ma[t.timeStamp]&&(Ma[t.timeStamp]=!0,window.console&&window.console.warn&&window.console.warn("Warning: ID3 tag length is not 249."),a._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),P=S.split("/"),s={},P.length<o(Ia.nol_breakout,"num"))return;for(Y in Ia)Ia.hasOwnProperty(Y)&&(s[Y]=P[Ia[Y]],"nol_breakout"===Y&&(s[Y]=P[o(Ia[Y],"num")].substr(0,2)),F[Y]=s[Y]);if(!s||M({data:e,param:"nol_tsvBreakoutMap"})&&M({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||s.nol_nWebAddress.indexOf("nielsen.com")===-1||s.nol_fdcid===M({data:e,param:"nol_cidNull"})&&s.nol_pccid===M({data:e,param:"nol_cidNull"}))return;for(e._currVidType="content",G=0,H=T.length;G<H;G+=1)l=Ca[T[G]]?Ca[T[G]].clientField:T[G],F[T[G]]=s[l]||M({data:e,param:T[G]});if(F.nol_vidtype="content",x(e,La.onId3Detected,F),"false"!==F.nol_disabled||"nol_cmsoffset"===M({data:e,param:"nol_timer"}))return;if("daypart"===M({data:e,param:"nol_cadence"})){var _a=M({data:e,param:"nol_assetid"});!_a&&s.nol_fdcid&&s.nol_fdcid!==M({data:e,param:"nol_cidNull"})?e._currAssetid=s.nol_fdcid:!e._currAssetid&&_a&&(e._currAssetid=_a)}if(s.nol_ac=e._currVidType,s.nol_assetid=M({data:e,param:"nol_assetid"})||e._currAssetid,u>0&&(M({data:e,param:"nol_product"}).indexOf("id3")!==-1||M({data:e,param:"nol_product"}).indexOf("mtvr")!==-1)&&(s.nol_pccid!==M({data:e,param:"nol_cidNull"})&&s.nol_pccid!==M({data:e,param:"nol_pccid"})||s.nol_fdcid!==M({data:e,param:"nol_cidNull"})&&s.nol_fdcid!==M({data:e,param:"nol_fdcid"}))&&w(e),!M({data:e,param:"nol_subTag"})&&"id3"!==M({data:e,param:"nol_product"})||s.nol_pccid===M({data:e,param:"nol_cidNull"})||s.nol_pccid===M({data:e,param:"nol_pccid"})||(b.filters.onId3PcCidChanged=!0,b.count+=1),M({data:e,param:"nol_subTag"})||s.nol_fdcid===M({data:e,param:"nol_cidNull"})||s.nol_fdcid===M({data:e,param:"nol_fdcid"})||(b.filters.onId3FdCidChanged=!0,b.count+=1),b.count){if(z(e,"sendID3",s),!b.filters.onId3FdCidChanged&&M({data:e,param:"nol_fdcid"})!=M({data:e,param:"nol_cidNull"})||M({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||(e.serviceFlag.tsv.need=!0),b.count>0)for(Y in b.filters)if(b.filters[Y]&&(x(e,La[Y]),"true"===M({data:e,param:"nol_disabled"})))return;if(La.onComplete&&(x(e,La.onComplete),"true"===M({data:e,param:"nol_disabled"})))return}else for(Y in s)s.hasOwnProperty(Y)&&M({data:e,param:Y,val:s[Y]});if(M({data:e,param:"nol_id3Raw",val:S}),e.serviceFlag.tsv.need&&h.indexOf("|"+M({data:e,param:"nol_product"})+"|")!==-1&&(L=M(b.filters.onId3PcCidChanged===!0?{data:e,param:"nol_pccid"}:{data:e,param:"nol_fdcid"}),V(e,{service:"tsv",key:L,url:M({data:e,param:"nol_tsvURL"})})),"id3"===M({data:e,param:"nol_product"})&&s.nol_watermark&&String(s.nol_watermark).length>0)return v=M({data:e,param:"nol_id3Data"}),g=Math.round(Da(e)/1e3+X),D=M({data:e,param:"nol_id3Seq"})||0,v?M({data:e,param:"nol_id3Data",val:v+="|"+g+","+M({data:e,param:"nol_id3Raw"})}):(M({data:e,param:"nol_id3Data",val:D+":"+M({data:e,param:"nol_clocksrc"})+":"+M({data:e,param:"nol_tsvFlag"})+":"+g+","+M({data:e,param:"nol_id3Raw"})}),M({data:e,param:"nol_id3Seq",val:o(D,"num")+1,vidType:"content"})),u>0&&w(e,{returnLength:!0}),u+=1,M({data:e,param:"nolPriv_id3Count",val:u}),void M({data:e,param:"nol_davState",val:"1"});if(u+=1,M({data:e,param:"nolPriv_id3Count",val:u}),O=M({data:e,param:M({data:e,param:"nol_timer"})})||M({data:e,param:"nol_fdoffset"}),"daypart"===M({data:e,param:"nol_cadence"})&&(O=o(O,"num"),O+="nol_pcoffset"==M({data:e,param:"nol_timer"})?o(M({data:e,param:"nol_pcTimeCode"}),"num"):o(M({data:e,param:"nol_fdTimeCode"}),"num")),e.serviceFlag.tsv.need)M({data:e,param:"nol_queueTime",val:O});else{if("true"===M({data:e,param:"nol_disabled"}))return;C(O,e),M({data:e,param:"nol_davState",val:"1"})}break;case"60":case"mute":break;case"30":case"onpaginate":"dcrstatic"===M({data:e,param:"nol_product"})&&La.onPaginateDetected&&"stream"!==M({data:e,param:"nol_cadence"})&&x(e,La.onPaginateDetected),M({data:e,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if("dcrvideo"===M({data:e,param:"nol_product"})){Fa.updateMetadata(e,d,Ca);var va=M({data:e,param:"nol_adLoadType"}),fa=M({data:e,param:"nol_adLoadTypeWhitelist"}).toLowerCase(),ga=M({data:e,param:"nol_countryCode2"}).toLowerCase();""!==va&&void 0!==va&&null!==va&&La.onAdLoadFlag&&(x(e,La.onAdLoadFlag),fa&&fa.indexOf(ga)!==-1&&La.onAdLoadFbDisable&&x(e,La.onAdLoadFbDisable))}}B(e,sa)}}function G(a){var e,t=null,r="content"==a._currVidType?o(M({data:a,param:"nol_chnlCountThrshld"}),"num")||da:o(M({data:a,param:"nol_staticCountThrshld"}),"num")||da,n=a._dataArrObj[a._currVidType],i,s=0,d=a._dataArrObj.count;if(!a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){if(d[a._currVidType]>=r){for(i in n)if(n.hasOwnProperty(i)){if(s=n[i].nolPriv_priority,s<=0){e=i;break}(null===t||t>s)&&(t=s,e=i)}n.hasOwnProperty(e)&&(delete n[e],d[a._currVidType]-=1)}a._dataArrObj[a._currVidType][a._currAssetid]={nolPriv_priority:0},d[a._currVidType]+=1}}function W(a,e){"undefined"!=typeof e&&e===!0&&(a._dataArrObj.static={}),a._dataArrObj.ad={},a._dataArrObj.content={},a._dataArrObj.count={content:0,ad:0,static:0},a._currAssetid="0"}function q(e){try{var t=M({data:e,param:"nol_playerId"});if(t&&a._players&&a._players.hasOwnProperty(t)){var r=a._players[t];if(r&&Object.keys(r.ottStatusObj).length>0){var n;for(n in r.ottStatusObj)M({data:e,param:n,val:r.ottStatusObj[n],vidType:"content"})}}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function J(e,t){try{if("1"===M({data:e,param:"nol_unifiedEnabled"})){var r=t&&t.hasOwnProperty("vidType")?t.vidType:e._currVidType.toLowerCase(),n=o(M({data:e,param:"nol_viewCount_"+r}),"num");M({data:e,param:"nol_viewCount_"+r,val:n+=1}),"1"===M({data:e,param:"nol_applyViewInc"})&&M({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function z(a,e,t){var r="",n,o,i="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count, nolPriv_baseSvrTime",s=M({data:a,param:{}}),d,l,p=M({data:a,param:"nol_playerId"});if(G(a),"ad"===a._currVidType.toLowerCase()&&(r="st,a",M({data:a,param:"nol_currSeg",val:"0"})),""===M({data:a,param:"nol_errorURL"})&&M({data:a,param:"nol_errorURL",val:ra+ta+oa+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===e)for(n in s)s.hasOwnProperty(n)&&i.indexOf(n)===-1&&M({data:a,param:n,val:D({data:a,param:n})||""});for(n in t)t.hasOwnProperty(n)&&M({data:a,param:String(n),val:String(t[n])});M({data:a,param:"nolPriv_sendData",val:!0}),M({data:a,param:"nol_davState",val:"0"}),M({data:a,param:"nol_highWM",val:"0"}),M({data:a,param:"nol_iagData",val:""}),M({data:a,param:"nol_disabled",val:"false"}),M({data:a,param:"nol_sendQual",val:D({data:a,param:"nol_sendQual"})||""}),M({data:a,param:"nolPriv_assetid",val:""}),"S"===D({data:a,param:"nol_segmentPrefix"})&&M({data:a,param:"nol_segmentPrefix",val:"S"}),M({data:a,param:"nol_c3"})||M({data:a,param:"nol_c3",val:r}),"content"===a._currVidType.toLowerCase()&&U(a),M({data:a,param:"nol_applyViewInc",val:"1"}),(!M({data:a,param:"nol_minutes"})||"daypart"!==M({data:a,param:"nol_cadence"})&&"dcrstatic"!==M({data:a,param:"nol_product"})||"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"===M({data:a,param:"nol_cadence"}))&&(b(a),M({data:a,param:"nol_pingCount",val:0}));var c=M({data:a,param:"nol_adLoadType"}),m=M({data:a,param:"nol_adLoadTypeWhitelist"}).toLowerCase(),u=M({data:a,param:"nol_countryCode2"}).toLowerCase();""!==c&&void 0!==c&&null!==c&&La.onAdLoadFlag&&(x(a,La.onAdLoadFlag),m&&m.indexOf(u)!==-1&&La.onAdLoadFbDisable&&x(a,La.onAdLoadFbDisable)),q(a)}function H(e,t){var r=t.id||t.getId?t.getId():"0",o=ma[r].nol_tagMap.nol_url,i,s,d,l=0,p=o?o[e.nol_url]||e.nol_url||"":e.nol_url||"",m={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},u={ad:{},content:{},static:{},count:{content:0,static:0}},_={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:window.location.href,nol_sendTime:"0",nol_pageURL:window.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:window.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0"},v=e;v.nol_playerId=r;var f={_dataArrObj:u,_settings:v,_currVidType:"ad",_currAssetid:"0",serviceFlag:m};a._listeners.addListener("tick",function(){if(t.pauseObj.eventPauseTime>=t.pauseObj.cmsPauseTime&&Fa.state.status.current(f)!==Fa.states.stopped&&Fa.state.status.current(f)!==Fa.states.paused&&Va.isEnabled(f)){var e={event:Ra.events.pause,curPos:Fa.state.position.current(f),prevPos:null,timestamp:Fa.state.timeStamp.current(f)};Fa.state.set(f,e),Va.preProcess(f,e),t.pauseObj.eventPauseTime=0}t.pauseObj.pauseTime>t.pauseObj.maxPauseTime&&"dcrstatic"!==M({data:f,param:"nol_product"})&&(t.pauseObj.pauseTime=0,a._listeners.fireEvent("handleSessionReset",{plid:r,passedFdata:f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),W(f);for(d in _)e.hasOwnProperty(d)?v[d]=e[d]:v[d]=ma[r][d]||_[d];if(v.nol_customExtension&&p){for(i=0,s=v.nol_customExtension.length;i<s;i+=1)p=p.replace("|!["+v.nol_customExtension[i]+"]!|",ma[r][v.nol_customExtension[i]]||"");v.nol_url=p}if("true"!==M({data:f,param:"nol_fireStop"})&&"interval,episode,streamduration".indexOf(M({data:f,param:"nol_cadence"}))===-1||n("pagehide||beforeunload",function(a){Ta&&(window.clearInterval(Ta),Ta=0,c({baseSvrTime:Da(f),serverTimeOffset:M({data:f,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:M({data:f,param:"nol_rfrmsk"})})),"sendBeacon"in navigator&&(Aa=!0),M({data:f,param:"nol_forceFireOnClose_content",val:"1"}),La.onEndDetected&&x(f,La.onEndDetected),Va.setNextTick(f,null,"content"),R(f)}),this.eventListener=function(a){Q(f,a)},ma[r].eventQueue.length>l)for(i=0;i<ma[r].eventQueue.length;i+=1)ma[r]&&ma[r].eventQueue&&(ma[r].eventQueue[i].timeStamp="queued"+i),Q(f,ma[r].eventQueue[i]),l=i}function Y(e){e&&e.hasOwnProperty("configReq")&&e.hasOwnProperty("player")&&e.configReq.length>0&&"undefined"!=typeof e.player?(d(e.configReq),window.clearInterval(e.player.lsPopulatedInterval),e.player.lsPopulatedInterval=0):a._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}var K=a.PLDPR=a.PLDPR||{},X=window.NOLCMB,Z=X.sdkvForConfig?X.sdkvForConfig():"bj.5.0.0",$="5.1.0",aa="81.3",ea=a.getBaseBuildVer?a.getBaseBuildVer()+aa:$+aa,ta="cgi-bin/",ra=X.getConfigAddress?X.getConfigAddress():X.getAddress(),na="cfg",oa="error",ia=a.getLS(),sa=a.getConfigVer?a.getConfigVer():300,da=5,la={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},pa={regex:/\|\![\w\W]*?(\!\|)/g,length:2},ca=/[\[\{<\(\}\]>\)]/g,ma=K.dataObj||{},ua=0,_a=0,va=5,fa=5,ga=[],ya,Ta,ha=2,Pa=!1,Sa=[],wa="false",ba=wa,Oa,Ca={},La={},ka={},Ea=!1,Aa=!1,Ia,xa={send:function(t,r){var n=t,o=n.url.indexOf("&c62=")!==-1?e(n.url,"c62=")+"&c62=sendTime,"+("undefined"!=typeof r?r/1e3>>0:Da()/1e3>>0):n.url,i=this,s=e(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),d=Aa?{onerror:{},onload:{}}:new Image;d.onerror=function(a){i.onError(a,n)},d.onload=function(a){var t="undefined"!=typeof a.target&&"unknown"!=typeof a.target?a.target:"undefined"!=typeof a.currentTarget&&"unknown"!=typeof a.currentTarget?a.currentTarget:void 0,r="undefined"!=typeof t.src&&"unknown"!=typeof t.src?t.src:"undefined"!=typeof t.currentSrc&&"unknown"!=typeof t.currentSrc?t.currentSrc:t.hasAttribute("src")?t.getAttribute("src"):void 0;if(t&&r.indexOf("cgi-bin/gn?prd=dcr")!==-1&&r.indexOf("P2D1AF374-356D-4817-8F48-4F87FDF4DF46&")===-1){var o=r.indexOf("rt=text")!==-1,s="us-809745",d="c01",l="P2D1AF374-356D-4817-8F48-4F87FDF4DF46",p=e(r,"ai=",!0),c=e(r,"asn=",!0);p=p&&p.params&&p.params["ai="]?p.params["ai="].split("=")[1]:"",c=c&&c.params&&c.params["asn="]?c.params["asn="].split("=")[1]:"";var m=e(r,"c29=plid,",!0);m=m&&m.params&&m.params["c29=plid,"]?m.params["c29=plid,"].split(",")[1]:m;var u=e(r,"sessionId=");u=e(u,"sup=")+"&sup=0",u=e(u,"forward=")+"&forward=1",u=e(u,"ci=")+"&ci="+s,u=e(u,"c6=")+"&c6=vc,"+d,u=e(u,"c13=")+"&c13=asid,"+l,u=e(u,"ca=")+"&ca="+(o?"NA":s+"_"+d+"_"+p),u=e(u,"ch=")+"&ch="+s+"_"+d+(o?"_"+c:"")+"_P",u+="&sessionId="+ma[m].nol_userSessionIdTemp,n.url=u,i.setup(n)}},a.postMsgAvail&&n.hasOwnProperty("maskRefUrl")&&n.maskRefUrl!==-1&&"true"===n.maskRefUrl?Na.sendMaskedPing(s):Aa?navigator.sendBeacon(s):d.src=s},setup:function(a){var e=this,t=a.hasOwnProperty("url")?a.url:"",r=a.params||{url:t,errorDelay:1e3*(a.delay||fa),retry:0,maskRefUrl:a.hasOwnProperty("maskRefUrl")&&String(a.maskRefUrl).length>0?a.maskRefUrl:-1};t&&t.length>0&&e.send(r,a.pingSendTime)},onError:function(a,e){var t=this,r=a.target.src;e&&e.retry<va&&r&&r.length>0&&(e.retry+=1,e.url=r,window.setTimeout(function(){t.send(e)},e.errorDelay))}},Da=function(a){return Fa.getTime(a)},Ma={},Va=function(){var a="nol_eventData",e="nol_eventDataDelimiter",t="nol_eventDataEvents",r="nol_eventDataEnabled",n=":",o={delimiter:"",eventsList:[]},i=function(){var a={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}};return a}(),s={get:function(e,t){var r="";return e&&(r=M({data:e,param:a,vidType:t||e._currVidType})),r},set:function(e,t,r){return e&&M({data:e,param:a,val:t,vidType:r||e._currVidType}),e},clear:function(e){e&&(M({data:e,param:a,val:"",vidType:"ad"}),M({data:e,param:a,val:"",vidType:"content"}))},clone:function(a){try{return{content:s.get(a,"content"),ad:s.get(a,"ad")}}catch(a){return null}},bind:function(a,e){try{if(a&&e)for(var t in e)s.set(a,e[t],t)}catch(a){}},append:function(a,e){if(a&&e){var t=s.get(a),r=s.delimiter(a),n=s.parseEventData(e);s.set(a,t?[t,n].join(r):n)}},delimiter:function(a){return a?(o.delimiter||(o.delimiter=M({data:a,param:e})),o.delimiter):""},isEnabled:function(a){return!!a&&"true"===M({data:a,param:r})},isEventEnabled:function(a,e){if(e&&a){var t=s.lookupEvent(a.toLowerCase());if(t)return s.eventsList(e).indexOf(t.name)>-1}return!1},eventsList:function(a){if(a){if(!o.eventsList||0==o.eventsList.length){var e=M({data:a,param:t});e&&(o.eventsList=e.split(","))}return o.eventsList}},clearCache:function(){o.delimiter="",o.eventsList=[]},lookupEvent:function(a){return a?i[a.toLowerCase()]:null},parseEventData:function(a){var e="";if(a){var t=s.lookupEvent(a.event);if(t){var r=[t.abbrv,a.timestamp,a.curPos];void 0!==a.prevPos&&null!==a.prevPos&&a.curPos!=a.prevPos&&r.push(a.prevPos),void 0!==a.p1&&null!==a.p1&&r.push(a.p1),e=r.join(n)}}return e},handleEvent:function(a,e){a&&e&&s.isEventEnabled(e.event,a)&&s.append(a,e)},setNextTick:function(a,e,t){var r=s.get(a,t);if(r&&r.indexOf("{{nextTick}}")>-1)if(e&&e.event===Ra.events.playhead)a=s.set(a,r.replace(/{{nextTick}}/gi,1==e.curPos?"0":e.curPos),t);else{var n=Fa.state.position.current(a,t)||"0";a=s.set(a,r.replace(/{{nextTick}}/gi,n),t)}return a},preProcess:function(a,e){try{a&&e&&e.event&&e.event!==Ra.events.play&&e.event.indexOf("event_")===-1&&(s.setNextTick(a,e),e.event===Ra.events.stop&&"content"!==Fa.type.current(a)&&s.setNextTick(a,e,"content"),s.handleEvent(a,e))}catch(a){}},postProcess:function(a,e){try{a&&e&&e.event&&e.event===Ra.events.play&&s.handleEvent(a,e)}catch(a){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),Fa={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",playerId:"nol_playerId"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return a._players[e];var t=M({data:e,param:"nol_playerId"});return Fa.findPlayer(t)}return null},getTime:function(a){try{if(a&&!a.hasOwnProperty("type")){var e=M({data:a,param:Fa._keys.playerId});return ma[e].nolPriv_baseSvrTime.getTime()}return a&&a.hasOwnProperty("type")&&"override"===a.type&&a.hasOwnProperty("baseSvrTime")?a.baseSvrTime.getTime():(new Date).getTime()}catch(a){}},currentPosition:function(a){return o(M({data:a,param:Fa._keys.currentPosition}),"num")},currentTimestamp:function(a){return o(M({data:a,param:Fa._keys.currentTimestamp}),"num")},asset:{current:function(a){return a?a._currAssetid:null},parse:function(a){var e=Ca.nol_assetid?Ca.nol_assetid.clientField:"nol_assetid";return a?a[e]:null}},type:{isCurrentlyContent:function(a){return"content"===a._currVidType},isCurrentlyAd:function(a){return"ad"===a._currVidType},isCurrentlyStatic:function(a){return"static"===a._currVidType},current:function(a){return a._currVidType},parse:function(a,e){var t=Ca.nol_vidtype?Ca.nol_vidtype.clientField:"nol_vidtype",r=e[t]?e[t].toString().toLowerCase():"",n=","+M({data:a,param:"nol_contentType"});return r&&n.indexOf(","+r)!==-1?"content":"dcrstatic"===M({data:a,param:"nol_product"})?"static":"ad"}},tagName:function(a,e){return M({data:a,param:Fa._keys.tagName,vidType:e||a._currVidType})},localTimer:function(a,e){return M({data:a,param:Fa._keys.localTimer,vidType:e||a._currVidType})||"nol_fdoffset"},isInitialized:function(a,e){try{return e=e||a._currVidType,"{}"!==JSON.stringify(a._dataArrObj[e])}catch(a){return!1}},updateMetadata:function(e,t,r){try{var n={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]},o=function(a){var e=!0;for(var t in n.nolParams)if(r&&r.hasOwnProperty(n.nolParams[t])&&a===r[n.nolParams[t]].clientField){e=!1;break}return e};if(!e||!t)return;var i="undefined"!=typeof r&&"object"==typeof r&&r;for(var s in t)t.hasOwnProperty(s)&&(i&&o(s)?M({data:e,param:String(s),val:String(t[s])}):a._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+s+" is not allowed. Please remove "+s+" from your metadata parameter."}))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},state:{position:{current:function(a,e){return o(M({data:a,param:Fa._keys.stateCurrentPosition,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(M({data:a,param:Fa._keys.statePreviousPosition,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Fa.state.position.current(a);M({data:a,param:Fa._keys.statePreviousPosition,val:r,vidType:t||a._currVidType}),M({data:a,param:Fa._keys.stateCurrentPosition,val:e,vidType:t||a._currVidType})}},timeStamp:{current:function(a,e){return o(M({data:a,param:Fa._keys.stateCurrentTimestamp,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(M({data:a,param:Fa._keys.statePreviousTimestamp,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Fa.state.timeStamp.current(a);M({data:a,param:Fa._keys.statePreviousTimestamp,val:r,vidType:t||a._currVidType}),M({data:a,param:Fa._keys.stateCurrentTimestamp,val:e,vidType:t||a._currVidType})}},asset:{current:function(a,e){return M({data:a,param:Fa._keys.stateCurrentAsset,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Fa._keys.statePreviousAsset,vidType:e||a._currVidType})},set:function(a,e,t){var r=Fa.state.asset.current(a);M({data:a,param:Fa._keys.statePreviousAsset,val:r,vidType:t||a._currVidType}),M({data:a,param:Fa._keys.stateCurrentAsset,val:e,vidType:t||a._currVidType})}},status:{current:function(a,e){return M({data:a,param:Fa._keys.stateCurrentStatus,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Fa._keys.statePreviousStatus,vidType:e||a._currVidType})},set:function(a,e,t){var r=Fa.state.status.current(a,t);M({data:a,param:Fa._keys.statePreviousStatus,val:r,vidType:t||a._currVidType}),M({data:a,param:Fa._keys.stateCurrentStatus,val:e,vidType:t||a._currVidType})}},type:{current:function(a,e){return M({data:a,param:Fa._keys.stateCurrentType,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Fa._keys.statePreviousType,vidType:e||a._currVidType})},set:function(a,e,t){var r=Fa.state.type.current(a,t);M({data:a,param:Fa._keys.statePreviousType,val:r,vidType:t||a._currVidType}),M({data:a,param:Fa._keys.stateCurrentType,val:e,vidType:t||a._currVidType})}},set:function(a,e){var t=Fa.findPlayer(a);switch(e.event){case"LOAD":Fa.state.asset.set(a,e.assetId),Fa.state.type.set(a,e.contentType),Fa.state.timeStamp.set(a,e.timestamp);break;case"PLAY":case"RESUME":Fa.state.status.set(a,Fa.states.playing),Fa.state.asset.set(a,e.assetId),Fa.state.type.set(a,e.contentType),Fa.state.timeStamp.set(a,e.timestamp),"PLAY"===e.event&&Fa.state.position.set(a,0),"RESUME"===e.event&&void 0!=e.currentPos&&null!=e.currentPos&&"{{nextTick}}"!=e.currentPos&&(Fa.state.position.set(a,e.curPos),Fa.state.timeStamp.set(a,e.timestamp)),t.pauseObj.eventPauseTime=0;break;case"PAUSE":Fa.state.status.set(a,Fa.states.paused);break;case"STOP":Fa.state.resetAsset(a),Fa.state.status.set(a,Fa.states.stopped);break;case"PLAYHEAD":Fa.state.position.set(a,e.curPos),Fa.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Fa.state.position.set(a,e.curPos),Fa.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":t.pauseObj.eventPauseTime=0}},get:function(a,e){try{if(a){var t={position:{current:Fa.state.position.current(a,e),previous:Fa.state.position.previous(a,e)},timeStamp:{current:Fa.state.timeStamp.current(a,e),previous:Fa.state.timeStamp.previous(a,e)},asset:{current:Fa.state.asset.current(a,e),previous:Fa.state.asset.previous(a,e)},status:{current:Fa.state.status.current(a,e),previous:Fa.state.status.previous(a,e)},type:{current:Fa.state.type.current(a,e),previous:Fa.state.type.previous(a,e)}};return t}}catch(a){}return null},resetAsset:function(a){Fa.state.position.set(a,null),Fa.state.timeStamp.set(a,null),Fa.state.asset.set(a,null)},bind:function(a,e){try{if(a&&e)for(var t in e)M({data:a,param:Fa._keys.statePreviousPosition,val:e[t].position?e[t].position.previous:null,vidType:t}),M({data:a,param:Fa._keys.stateCurrentPosition,val:e[t].position?e[t].position.current:null,vidType:t}),M({data:a,param:Fa._keys.statePreviousTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),M({data:a,param:Fa._keys.stateCurrentTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),M({data:a,param:Fa._keys.statePreviousAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),M({data:a,param:Fa._keys.stateCurrentAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),M({data:a,param:Fa._keys.statePreviousStatus,val:e[t].status?e[t].status.current:null,vidType:t}),M({data:a,param:Fa._keys.stateCurrentStatus,val:e[t].status?e[t].status.current:null,vidType:t}),M({data:a,param:Fa._keys.statePreviousType,val:e[t].type?e[t].type.current:null,vidType:t}),M({data:a,param:Fa._keys.stateCurrentType,val:e[t].type?e[t].type.current:null,vidType:t})}catch(a){}},clone:function(a){try{return{content:Fa.state.get(a,"content"),ad:Fa.state.get(a,"ad")}}catch(a){}}}},Ra=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},t={checkRewind:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==M({data:a,param:"nol_cadence"})&&"impression"!==M({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Fa.state.position.current(a),n=t-r;return{match:n<0,currentPos:t,previousPos:r}}return!1},checkForward:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==M({data:a,param:"nol_cadence"})&&"impression"!==M({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Fa.state.position.current(a),n=Fa.state.timeStamp.current(a),i=o(M({data:a,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil((Da(a)-n)/1e3)||1;if(0==r&&t>86400&&"nol_cmsoffset"===Fa.localTimer(a)){var d=Da(a).toString().substr(0,e.toString().length);d&&(r=parseInt(d))}var l=t-r;return{match:l>i&&l>Math.ceil(1.5*s),currentPos:t,previousPos:r}}return!1}},r={checkRewind:function(a,e){var t=Fa.currentPosition(a),r=Fa.currentTimestamp(a),n=o(M({data:a,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(a,e){var t=Fa.currentPosition(a),r=Fa.currentTimestamp(a),n=o(M({data:a,param:"nol_id3IntrvlGp"}),"num");return!1}},n={inferEvent:function(r,n,i,s,d){var l=null;try{if(l={event:"event_"+r,curPos:Fa.state.position.current(n),prevPos:null,timestamp:s},r&&n)switch(r.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var p=Fa.asset.parse(d),c=Fa.state.asset.current(n),m=Fa.state.asset.previous(n),u=Fa.state.type.current(n),_=Fa.type.parse(n,d);if(l.event=e.load,l.assetId=p,l.contentType=_,Fa.state.status.current(n,_)==Fa.states.paused&&(c==p&&null!==p||u!==_)){l.event=e.resume,l.assetId=p,l.contentType=_,l.curPos="{{nextTick}}";break}if(Fa.state.status.current(n,_)!==Fa.states.playing&&c!=p||Fa.state.status.current(n,_)===Fa.states.stopped&&m==p&&null!==p||null===c){l.event=e.play,l.curPos="{{nextTick}}";break}break;case"5":case"play":l.event="event_play";break;case"7":case"stop":l.event="event_stop";break;case"57":case"end":case"oncomplete":l.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(i>-1){var v=t.checkRewind(n,i);if(v.match){l.event=e.rewind,l.curPos=v.currentPos,l.prevPos=v.previousPos,l.p1=l.prevPos-l.curPos;break}if(Va.get(n).indexOf("{{nextTick}}")===-1){var f=t.checkForward(n,i);if(f.match){l.event=e.forward,l.curPos=f.currentPos,l.prevPos=f.previousPos,l.p1=l.curPos-l.prevPos;break}}if(Fa.state.status.current(n)===Fa.states.paused){l.event=e.resume,l.assetId=Fa.state.asset.current(n),l.contentType=Fa.type.current(n),l.curPos=i;break}l.event=e.playhead,l.curPos=i}break;case"55":var g=M({data:n,param:M({data:n,param:"nol_timer"})})||M({data:n,param:"nol_fdoffset"});"daypart"===M({data:n,param:"nol_cadence"})&&(g=o(g,"num"),g+="nol_pcoffset"==M({data:n,param:"nol_timer"})?o(M({data:n,param:"nol_pcTimeCode"}),"num"):o(M({data:n,param:"nol_fdTimeCode"}),"num")),l.event=e.playhead;break;case"9":case"mute":l.event=e.mute,l.p1=i}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+r})}return l}};return{events:e,inferEvent:n.inferEvent}}(),Na=function(a,e,t){var r={sendMaskedPing:function(n,o){a.lsReady()?e.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:n}}),e.src):(o=o||0,o<t.maxRetry&&setTimeout(function(){r.sendMaskedPing(n,o+1)},300))}};return{sendMaskedPing:r.sendMaskedPing}}(a,ia,{maxRetry:va}),ja=["sun","mon","tue","wed","thu","fri","sat"];return K.initFromConfig=function(e,t,r){a._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(e&&e.nol_GLOBALS){var n,i,d,l,p,m,u="localhost",_=e.nol_GLOBALS.debugSfcode||"uat-cert",v=e.nol_GLOBALS.nol_appid||"",f=e.nol_GLOBALS.nol_lsid||"",g=e.nol_GLOBALS.nol_emmURL||(e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_defaults?e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",y,T,h,P,S,w,b,O;if(a._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+a.localStorageId+"; config lsid: "+f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+a.EMMURL+"; config emm: "+g}),""===g&&""!==f?a.setLsId(f):""!==g&&(""!==f&&a.localStorageId!==f||g!==a.EMMURL)&&(a.setLsId(f,g),
a.setEmmUrl(g)),a._listeners.fireEvent("sendOptOutStatus","OPTOUT"==f),void 0!==e.nol_GLOBALS.nol_maxRetry&&null!==e.nol_GLOBALS.nol_maxRetry&&""!==e.nol_GLOBALS.nol_maxRetry){var C=parseInt(e.nol_GLOBALS.nol_maxRetry);C>-1&&(va=C)}if(e&&e.hasOwnProperty("nol_GLOBALS")){var L=t||e.nol_GLOBALS.nol_playerId||0;if(i=a._players[L],!i)return;u=e.nol_GLOBALS.nol_sfcode||u,a._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+i.name+'" initialized with globals '+JSON.stringify(i.getConfigParams().ggParams)}),i.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(e.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(e.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},O=a.localStorage?ma[L]?ma[L].nol_serverTime||a.localStorage.getItem("nol_serverTime"):a.localStorage.getItem("nol_serverTime")||0:ma[L]?ma[L].nol_serverTime:0,O===e.nol_GLOBALS.nol_serverTime?ua=0:(ua=0,a.localStorage&&a.localStorage.setItem("nol_serverTime",e.nol_GLOBALS.nol_serverTime)),fa=e.nol_GLOBALS.nol_errorWait||fa,n=i.getConfigParams().ggParams||{},ma[L]=s(ma[L]),ma[L].nolPriv_serverTimeOffset=ua,ma&&ma.hasOwnProperty(L)?(ma[L].nolPriv_baseSvrTime=e.nol_GLOBALS.hasOwnProperty("nol_serverTime")&&e.nol_GLOBALS.nol_serverTime?new Date(1e3*o(e.nol_GLOBALS.nol_serverTime,"num")):(new Date).getTime(),a._listeners.addListener("tick",function(){ma[L].nolPriv_baseSvrTime.setUTCSeconds(ma[L].nolPriv_baseSvrTime.getUTCSeconds()+1)})):a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),Ta&&(window.clearInterval(Ta),Ta=0),e.nol_GLOBALS.nol_sendTimer&&(Ta=window.setInterval(function(){c({baseSvrTime:Da(fData),serverTimeOffset:ma[L].nolPriv_serverTimeOffset,url:"__sendIt"})},1e3*e.nol_GLOBALS.nol_sendTimer));for(d in n)n.hasOwnProperty(d)&&(ma[L][d]=n[d]);for(d in e.nol_GLOBALS)e.nol_GLOBALS.hasOwnProperty(d)&&(ma[L][d]=e.nol_GLOBALS[d]);La=ma[L].nol_eventFilter||{},ka=ma[L].nol_serviceFilter||{},Ia=ma[L].nol_id3Map||{};for(d in ma[L].nol_clientCMSmap)ma[L].nol_clientCMSmap.hasOwnProperty(d)&&(T=ma[L].nol_clientCMSmap[d].toString()||"",h=T.replace(ca,""),S=T.match(ca)||[],P={clientField:h.toString(),encoding:S.join("")},Ca[d]=P);e.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&X.hasOwnProperty("setTotalNumAssetsAllowed")&&X.setTotalNumAssetsAllowed(e.nol_GLOBALS.nol_maxStaticInstances),i.configLoaded=!0,ma[L].nol_lstrg="",ma[L].nol_userSessionIdTemp=i.sessionId,f&&"999"!==f&&!a.userAgent.isFB()&&(ma[L].nol_lstrg="lstrg-"+f)}if(e&&e.hasOwnProperty("nol_TAGS"))for(ma[L].tagSize=e.nol_TAGS.length,ma[L].tags=[],a._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),d=0;d<ma[L].tagSize;d+=1)a._listeners.fireEvent("debug",{type:"debug",msg:String(e.nol_TAGS[d].nol_comment)}),ma[L].tags.push(new H(JSON.parse(JSON.stringify(e.nol_TAGS[d])),i));if(void 0!==a.enablePlayer&&a.enablePlayer(L,"PLDPR"),ma[L].bReInit=!1,n.nol_hybridCfg&&window&&window.JSON&&(y=window.document.createElement("script"),y.text="(function() {if (typeof "+n.nol_hybridCfg+" === 'function'){"+n.nol_hybridCfg+"('"+JSON.stringify(e)+"')}}())",window.document.head?(window.document.head.appendChild(y),window.document.head.removeChild(y)):(window.document.getElementsByTagName("head")[0].appendChild(y),window.document.getElementsByTagName("head")[0].removeChild(y))),ma[L].forceStreamRegen=!1,a._listeners.addListener("tick",function(){i&&i.hasOwnProperty("pauseObj")&&i.pauseObj.hasOwnProperty("pauseTime")&&(i.pauseObj.pauseTime+=1,i.pauseObj.eventPauseTime+=1)}),i&&i.configLoaded&&window.NOLCMB&&window.NOLCMB.controllers&&window.NOLCMB.controllers.util&&window.NOLCMB.controllers.util.fireCustomEvent)try{window.NOLCMB.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:i.name,instance:i})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Exception firing NSDK_Initialized event."})}a._listeners.fireEvent("flushQueue")}else window.console&&window.console.warn&&window.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."})}catch(e){window.console&&window.console.error&&window.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response."})}},K.getCmsMap=function(e){try{if("undefined"!=typeof e&&"string"==typeof e||a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),ma&&ma.hasOwnProperty(e)&&"undefined"!=typeof ma[e].nol_clientCMSmap)return ma[e].nol_clientCMSmap}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},K.init=function(e){var t=e.getConfigParams()||{},r,n,o=a.getIfLsidShouldSend()?a.getLsId():void 0,i,s="",d=0===ra.indexOf("https")?"https":"http",l=t.nol_playerId||t.playerId||0;i={pli:{val:l,protect:!0},nmspc:{val:"NOLCMB",protect:!0},sdkv:{val:Z,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:sa,protect:!0},bldv:{val:ea,protect:!0},prefprotocol:{val:d,protect:!1}},e.addListener("ggPM",function(a){E(a)}),e.lsPopulatedInterval=0,e.lsCurrentRetry=0,e.serviceSending={tsv:!1,stn:!1},e.ottStatusObj={},e.oServiceCall={},e.static={started:!1};for(r in t.ggParams)!t.ggParams.hasOwnProperty(r)||i[r]&&i[r].protect||0==r.indexOf("nol_")||(i[r]={val:p(t.ggParams[r])});for(r in i)i.hasOwnProperty(r)&&(s+=r+"="+i[r].val+"&");s=s.substr(0,s.length-1),n=ra.replace(/[\w\W]*?:\/\//g,""),void 0===o||e.lsPopulatedInterval?void 0===o&&(Oa=d+"://"+n+ta+na+"?"+s+"&sendTime="+Math.floor(Da()/1e3),Y({configReq:Oa,player:e})):e.lsPopulatedInterval=window.setInterval(function(){o=a.getLsId(),"-1"!==o?(Oa=d+"://"+n+ta+na+"?"+s+"&lsid="+o+"&sendTime="+Math.floor(Da()/1e3),Y({configReq:Oa,player:e})):e.lsCurrentRetry===ha?(Oa=d+"://"+n+ta+na+"?"+s+"&lsid=999&sendTime="+Math.floor(Da()/1e3),Y({configReq:Oa,player:e})):e.lsCurrentRetry+=1},1e3)},K.built||(K.built=!0,K.BUILDVERSION=ea,K.dataObj=ma,a.bindPlayers(K,"PLDPR"),a._listeners.fireEvent("flushQueue")),K});